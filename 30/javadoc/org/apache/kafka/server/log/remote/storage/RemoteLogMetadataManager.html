<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>RemoteLogMetadataManager (kafka 3.0.2 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.kafka.server.log.remote.storage, interface: RemoteLogMetadataManager">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.kafka.server.log.remote.storage</a></div>
<h1 title="Interface RemoteLogMetadataManager" class="title">Interface RemoteLogMetadataManager</h1>
</div>
<section class="description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="../../../../common/Configurable.html" title="interface in org.apache.kafka.common">Configurable</a></code></dd>
</dl>
<hr>
<pre><a href="../../../../common/annotation/InterfaceStability.Evolving.html" title="annotation in org.apache.kafka.common.annotation">@Evolving</a>
public interface <span class="type-name-label">RemoteLogMetadataManager</span>
extends <a href="../../../../common/Configurable.html" title="interface in org.apache.kafka.common">Configurable</a>, <a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></pre>
<div class="block">This interface provides storing and fetching remote log segment metadata with strongly consistent semantics.
 <p>
 This class can be plugged in to Kafka cluster by adding the implementation class as
 <code>remote.log.metadata.manager.class.name</code> property value. There is an inbuilt implementation backed by
 topic storage in the local cluster. This is used as the default implementation if
 remote.log.metadata.manager.class.name is not configured.
 </p>
 <p>
 <code>remote.log.metadata.manager.class.path</code> property is about the class path of the RemoteLogStorageManager
 implementation. If specified, the RemoteLogStorageManager implementation and its dependent libraries will be loaded
 by a dedicated classloader which searches this class path before the Kafka broker class path. The syntax of this
 parameter is same with the standard Java class path string.
 </p>
 <p>
 <code>remote.log.metadata.manager.listener.name</code> property is about listener name of the local broker to which
 it should get connected if needed by RemoteLogMetadataManager implementation. When this is configured all other
 required properties can be passed as properties with prefix of 'remote.log.metadata.manager.listener.
 </p>
 "cluster.id", "broker.id" and all other properties prefixed with "remote.log.metadata." are passed when
 <a href="../../../../common/Configurable.html#configure(java.util.Map)"><code>Configurable.configure(Map)</code></a> is invoked on this instance.
 <p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="table-tab" onclick="show(4);">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#addRemoteLogSegmentMetadata(org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadata)">addRemoteLogSegmentMetadata</a></span>&#8203;(<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&nbsp;remoteLogSegmentMetadata)</code></th>
<td class="col-last">
<div class="block">Adds <a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> with the containing <a href="RemoteLogSegmentId.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentId</code></a> into <a href="RemoteLogMetadataManager.html" title="interface in org.apache.kafka.server.log.remote.storage"><code>RemoteLogMetadataManager</code></a>.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#highestOffsetForEpoch(org.apache.kafka.common.TopicIdPartition,int)">highestOffsetForEpoch</a></span>&#8203;(<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
int&nbsp;leaderEpoch)</code></th>
<td class="col-last">
<div class="block">Returns the highest log offset of topic partition for the given leader epoch in remote storage.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#listRemoteLogSegments(org.apache.kafka.common.TopicIdPartition)">listRemoteLogSegments</a></span>&#8203;(<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition)</code></th>
<td class="col-last">
<div class="block">Returns all the remote log segment metadata of the given topicIdPartition.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#listRemoteLogSegments(org.apache.kafka.common.TopicIdPartition,int)">listRemoteLogSegments</a></span>&#8203;(<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
int&nbsp;leaderEpoch)</code></th>
<td class="col-last">
<div class="block">Returns iterator of remote log segment metadata, sorted by <a href="RemoteLogSegmentMetadata.html#startOffset()"><code>RemoteLogSegmentMetadata.startOffset()</code></a> in
 ascending order which contains the given leader epoch.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#onPartitionLeadershipChanges(java.util.Set,java.util.Set)">onPartitionLeadershipChanges</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;leaderPartitions,
<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;followerPartitions)</code></th>
<td class="col-last">
<div class="block">This method is invoked only when there are changes in leadership of the topic partitions that this broker is
 responsible for.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#onStopPartitions(java.util.Set)">onStopPartitions</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;partitions)</code></th>
<td class="col-last">
<div class="block">This method is invoked only when the topic partitions are stopped on this broker.</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#putRemotePartitionDeleteMetadata(org.apache.kafka.server.log.remote.storage.RemotePartitionDeleteMetadata)">putRemotePartitionDeleteMetadata</a></span>&#8203;(<a href="RemotePartitionDeleteMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemotePartitionDeleteMetadata</a>&nbsp;remotePartitionDeleteMetadata)</code></th>
<td class="col-last">
<div class="block">This method is used to update the metadata about remote partition delete event.</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#remoteLogSegmentMetadata(org.apache.kafka.common.TopicIdPartition,int,long)">remoteLogSegmentMetadata</a></span>&#8203;(<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
int&nbsp;epochForOffset,
long&nbsp;offset)</code></th>
<td class="col-last">
<div class="block">Returns <a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> if it exists for the given topic partition containing the offset with
 the given leader-epoch for the offset, else returns <a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Optional.html#empty()" title="class or interface in java.util" class="external-link"><code>Optional.empty()</code></a>.</div>
</td>
</tr>
<tr class="alt-color" id="i8">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#updateRemoteLogSegmentMetadata(org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadataUpdate)">updateRemoteLogSegmentMetadata</a></span>&#8203;(<a href="RemoteLogSegmentMetadataUpdate.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadataUpdate</a>&nbsp;remoteLogSegmentMetadataUpdate)</code></th>
<td class="col-last">
<div class="block">This method is used to update the <a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.io.Closeable">Methods inherited from interface&nbsp;java.io.<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/io/Closeable.html#close()" title="class or interface in java.io" class="external-link">close</a></code></div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.org.apache.kafka.common.Configurable">Methods inherited from interface&nbsp;org.apache.kafka.common.<a href="../../../../common/Configurable.html" title="interface in org.apache.kafka.common">Configurable</a></h3>
<code><a href="../../../../common/Configurable.html#configure(java.util.Map)">configure</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="addRemoteLogSegmentMetadata(org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadata)">
<h3>addRemoteLogSegmentMetadata</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">addRemoteLogSegmentMetadata</span>&#8203;(<span class="parameters"><a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&nbsp;remoteLogSegmentMetadata)</span>
                          throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">Adds <a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> with the containing <a href="RemoteLogSegmentId.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentId</code></a> into <a href="RemoteLogMetadataManager.html" title="interface in org.apache.kafka.server.log.remote.storage"><code>RemoteLogMetadataManager</code></a>.
 <p>
 RemoteLogSegmentMetadata is identified by RemoteLogSegmentId and it should have the initial state which is <a href="RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a>.
 <p>
 <a href="#updateRemoteLogSegmentMetadata(org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadataUpdate)"><code>updateRemoteLogSegmentMetadata(RemoteLogSegmentMetadataUpdate)</code></a> should be used to update an existing RemoteLogSegmentMetadata.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>remoteLogSegmentMetadata</code> - metadata about the remote log segment.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the given metadata instance does not have the state as <a href="RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateRemoteLogSegmentMetadata(org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadataUpdate)">
<h3>updateRemoteLogSegmentMetadata</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">updateRemoteLogSegmentMetadata</span>&#8203;(<span class="parameters"><a href="RemoteLogSegmentMetadataUpdate.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadataUpdate</a>&nbsp;remoteLogSegmentMetadataUpdate)</span>
                             throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">This method is used to update the <a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a>. Currently, it allows to update with the new
 state based on the life cycle of the segment. It can go through the below state transitions.
 <p>
 <pre>
 +---------------------+            +----------------------+
 |COPY_SEGMENT_STARTED |-----------&gt;|COPY_SEGMENT_FINISHED |
 +-------------------+-+            +--+-------------------+
                     |                 |
                     |                 |
                     v                 v
                  +--+-----------------+-+
                  |DELETE_SEGMENT_STARTED|
                  +-----------+----------+
                              |
                              |
                              v
                  +-----------+-----------+
                  |DELETE_SEGMENT_FINISHED|
                  +-----------------------+
 </pre>
 <p>
 <a href="RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a> - This state indicates that the segment copying to remote storage is started but not yet finished.
 <a href="RemoteLogSegmentState.html#COPY_SEGMENT_FINISHED"><code>RemoteLogSegmentState.COPY_SEGMENT_FINISHED</code></a> - This state indicates that the segment copying to remote storage is finished.
 <br>
 The leader broker copies the log segments to the remote storage and puts the remote log segment metadata with the
 state as “COPY_SEGMENT_STARTED” and updates the state as “COPY_SEGMENT_FINISHED” once the copy is successful.
 <p></p>
 <a href="RemoteLogSegmentState.html#DELETE_SEGMENT_STARTED"><code>RemoteLogSegmentState.DELETE_SEGMENT_STARTED</code></a> - This state indicates that the segment deletion is started but not yet finished.
 <a href="RemoteLogSegmentState.html#DELETE_SEGMENT_FINISHED"><code>RemoteLogSegmentState.DELETE_SEGMENT_FINISHED</code></a> - This state indicates that the segment is deleted successfully.
 <br>
 Leader partitions publish both the above delete segment events when remote log retention is reached for the
 respective segments. Remote Partition Removers also publish these events when a segment is deleted as part of
 the remote partition deletion.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>remoteLogSegmentMetadataUpdate</code> - update of the remote log segment metadata.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
<dd><code><a href="RemoteResourceNotFoundException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteResourceNotFoundException</a></code> - when there are no resources associated with the given remoteLogSegmentMetadataUpdate.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the given metadata instance has the state as <a href="RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="remoteLogSegmentMetadata(org.apache.kafka.common.TopicIdPartition,int,long)">
<h3>remoteLogSegmentMetadata</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</span>&nbsp;<span class="member-name">remoteLogSegmentMetadata</span>&#8203;(<span class="parameters"><a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
int&nbsp;epochForOffset,
long&nbsp;offset)</span>
                                                     throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">Returns <a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> if it exists for the given topic partition containing the offset with
 the given leader-epoch for the offset, else returns <a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Optional.html#empty()" title="class or interface in java.util" class="external-link"><code>Optional.empty()</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>topicIdPartition</code> - topic partition</dd>
<dd><code>epochForOffset</code> - leader epoch for the given offset</dd>
<dd><code>offset</code> - offset</dd>
<dt>Returns:</dt>
<dd>the requested remote log segment metadata if it exists.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="highestOffsetForEpoch(org.apache.kafka.common.TopicIdPartition,int)">
<h3>highestOffsetForEpoch</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="member-name">highestOffsetForEpoch</span>&#8203;(<span class="parameters"><a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
int&nbsp;leaderEpoch)</span>
                              throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">Returns the highest log offset of topic partition for the given leader epoch in remote storage. This is used by
 remote log management subsystem to know up to which offset the segments have been copied to remote storage for
 a given leader epoch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>topicIdPartition</code> - topic partition</dd>
<dd><code>leaderEpoch</code> - leader epoch</dd>
<dt>Returns:</dt>
<dd>the requested highest log offset if exists.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="putRemotePartitionDeleteMetadata(org.apache.kafka.server.log.remote.storage.RemotePartitionDeleteMetadata)">
<h3>putRemotePartitionDeleteMetadata</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">putRemotePartitionDeleteMetadata</span>&#8203;(<span class="parameters"><a href="RemotePartitionDeleteMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemotePartitionDeleteMetadata</a>&nbsp;remotePartitionDeleteMetadata)</span>
                               throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">This method is used to update the metadata about remote partition delete event. Currently, it allows updating the
 state (<a href="RemotePartitionDeleteState.html" title="enum in org.apache.kafka.server.log.remote.storage"><code>RemotePartitionDeleteState</code></a>) of a topic partition in remote metadata storage. Controller invokes
 this method with <a href="RemotePartitionDeleteMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemotePartitionDeleteMetadata</code></a> having state as <a href="RemotePartitionDeleteState.html#DELETE_PARTITION_MARKED"><code>RemotePartitionDeleteState.DELETE_PARTITION_MARKED</code></a>.
 So, remote partition removers can act on this event to clean the respective remote log segments of the partition.
 <p><br>
 In the case of default RLMM implementation, remote partition remover processes <a href="RemotePartitionDeleteState.html#DELETE_PARTITION_MARKED"><code>RemotePartitionDeleteState.DELETE_PARTITION_MARKED</code></a>
 <ul>
 <li> sends an event with state as <a href="RemotePartitionDeleteState.html#DELETE_PARTITION_STARTED"><code>RemotePartitionDeleteState.DELETE_PARTITION_STARTED</code></a>
 <li> gets all the remote log segments and deletes them.
 <li> sends an event with state as <a href="RemotePartitionDeleteState.html#DELETE_PARTITION_FINISHED"><code>RemotePartitionDeleteState.DELETE_PARTITION_FINISHED</code></a> once all the remote log segments are
 deleted.
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>remotePartitionDeleteMetadata</code> - update on delete state of a partition.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
<dd><code><a href="RemoteResourceNotFoundException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteResourceNotFoundException</a></code> - when there are no resources associated with the given remotePartitionDeleteMetadata.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listRemoteLogSegments(org.apache.kafka.common.TopicIdPartition)">
<h3>listRemoteLogSegments</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</span>&nbsp;<span class="member-name">listRemoteLogSegments</span>&#8203;(<span class="parameters"><a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition)</span>
                                                  throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">Returns all the remote log segment metadata of the given topicIdPartition.
 <p>
 Remote Partition Removers uses this method to fetch all the segments for a given topic partition, so that they
 can delete them.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Iterator of all the remote log segment metadata for the given topic partition.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listRemoteLogSegments(org.apache.kafka.common.TopicIdPartition,int)">
<h3>listRemoteLogSegments</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;<a href="RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</span>&nbsp;<span class="member-name">listRemoteLogSegments</span>&#8203;(<span class="parameters"><a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
int&nbsp;leaderEpoch)</span>
                                                  throws <span class="exceptions"><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></span></div>
<div class="block">Returns iterator of remote log segment metadata, sorted by <a href="RemoteLogSegmentMetadata.html#startOffset()"><code>RemoteLogSegmentMetadata.startOffset()</code></a> in
 ascending order which contains the given leader epoch. This is used by remote log retention management subsystem
 to fetch the segment metadata for a given leader epoch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>topicIdPartition</code> - topic partition</dd>
<dd><code>leaderEpoch</code> - leader epoch</dd>
<dt>Returns:</dt>
<dd>Iterator of remote segments, sorted by start offset in ascending order.</dd>
<dt>Throws:</dt>
<dd><code><a href="RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onPartitionLeadershipChanges(java.util.Set,java.util.Set)">
<h3>onPartitionLeadershipChanges</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">onPartitionLeadershipChanges</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;leaderPartitions,
<a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;followerPartitions)</span></div>
<div class="block">This method is invoked only when there are changes in leadership of the topic partitions that this broker is
 responsible for.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>leaderPartitions</code> - partitions that have become leaders on this broker.</dd>
<dd><code>followerPartitions</code> - partitions that have become followers on this broker.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onStopPartitions(java.util.Set)">
<h3>onStopPartitions</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">onStopPartitions</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../../common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;partitions)</span></div>
<div class="block">This method is invoked only when the topic partitions are stopped on this broker. This can happen when a
 partition is emigrated to other broker or a partition is deleted.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>partitions</code> - topic partitions that have been stopped.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
</footer>
</div>
</div>
</body>
</html>
