<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>RemoteLogMetadataManager (kafka 3.3.1 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RemoteLogMetadataManager (kafka 3.3.1 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentId.html" title="class in org.apache.kafka.server.log.remote.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html" target="_top">Frames</a></li>
<li><a href="RemoteLogMetadataManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.kafka.server.log.remote.storage</div>
<h2 title="Interface RemoteLogMetadataManager" class="title">Interface RemoteLogMetadataManager</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="../../../../../../../org/apache/kafka/common/Configurable.html" title="interface in org.apache.kafka.common">Configurable</a></dd>
</dl>
<hr>
<br>
<pre><a href="../../../../../../../org/apache/kafka/common/annotation/InterfaceStability.Evolving.html" title="annotation in org.apache.kafka.common.annotation">@InterfaceStability.Evolving</a>
public interface <span class="typeNameLabel">RemoteLogMetadataManager</span>
extends <a href="../../../../../../../org/apache/kafka/common/Configurable.html" title="interface in org.apache.kafka.common">Configurable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">This interface provides storing and fetching remote log segment metadata with strongly consistent semantics.
 <p>
 This class can be plugged in to Kafka cluster by adding the implementation class as
 <code>remote.log.metadata.manager.class.name</code> property value. There is an inbuilt implementation backed by
 topic storage in the local cluster. This is used as the default implementation if
 remote.log.metadata.manager.class.name is not configured.
 </p>
 <p>
 <code>remote.log.metadata.manager.class.path</code> property is about the class path of the RemoteLogStorageManager
 implementation. If specified, the RemoteLogStorageManager implementation and its dependent libraries will be loaded
 by a dedicated classloader which searches this class path before the Kafka broker class path. The syntax of this
 parameter is same with the standard Java class path string.
 </p>
 <p>
 <code>remote.log.metadata.manager.listener.name</code> property is about listener name of the local broker to which
 it should get connected if needed by RemoteLogMetadataManager implementation. When this is configured all other
 required properties can be passed as properties with prefix of 'remote.log.metadata.manager.listener.
 </p>
 "cluster.id", "broker.id" and all other properties prefixed with "remote.log.metadata." are passed when
 <a href="../../../../../../../org/apache/kafka/common/Configurable.html#configure-java.util.Map-"><code>Configurable.configure(Map)</code></a> is invoked on this instance.
 <p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#addRemoteLogSegmentMetadata-org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadata-">addRemoteLogSegmentMetadata</a></span>(<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&nbsp;remoteLogSegmentMetadata)</code>
<div class="block">This method is used to add <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> asynchronously with the containing <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentId.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentId</code></a> into <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html" title="interface in org.apache.kafka.server.log.remote.storage"><code>RemoteLogMetadataManager</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#highestOffsetForEpoch-org.apache.kafka.common.TopicIdPartition-int-">highestOffsetForEpoch</a></span>(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
                     int&nbsp;leaderEpoch)</code>
<div class="block">Returns the highest log offset of topic partition for the given leader epoch in remote storage.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#listRemoteLogSegments-org.apache.kafka.common.TopicIdPartition-">listRemoteLogSegments</a></span>(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition)</code>
<div class="block">Returns all the remote log segment metadata of the given topicIdPartition.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#listRemoteLogSegments-org.apache.kafka.common.TopicIdPartition-int-">listRemoteLogSegments</a></span>(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
                     int&nbsp;leaderEpoch)</code>
<div class="block">Returns iterator of remote log segment metadata, sorted by <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html#startOffset--"><code>RemoteLogSegmentMetadata.startOffset()</code></a> in
 ascending order which contains the given leader epoch.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#onPartitionLeadershipChanges-java.util.Set-java.util.Set-">onPartitionLeadershipChanges</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;leaderPartitions,
                            <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;followerPartitions)</code>
<div class="block">This method is invoked only when there are changes in leadership of the topic partitions that this broker is
 responsible for.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#onStopPartitions-java.util.Set-">onStopPartitions</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;partitions)</code>
<div class="block">This method is invoked only when the topic partitions are stopped on this broker.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#putRemotePartitionDeleteMetadata-org.apache.kafka.server.log.remote.storage.RemotePartitionDeleteMetadata-">putRemotePartitionDeleteMetadata</a></span>(<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemotePartitionDeleteMetadata</a>&nbsp;remotePartitionDeleteMetadata)</code>
<div class="block">This method is used to update the metadata about remote partition delete event asynchronously.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#remoteLogSegmentMetadata-org.apache.kafka.common.TopicIdPartition-int-long-">remoteLogSegmentMetadata</a></span>(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
                        int&nbsp;epochForOffset,
                        long&nbsp;offset)</code>
<div class="block">Returns <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> if it exists for the given topic partition containing the offset with
 the given leader-epoch for the offset, else returns <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true#empty--" title="class or interface in java.util"><code>Optional.empty()</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#updateRemoteLogSegmentMetadata-org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadataUpdate-">updateRemoteLogSegmentMetadata</a></span>(<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadataUpdate.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadataUpdate</a>&nbsp;remoteLogSegmentMetadataUpdate)</code>
<div class="block">This method is used to update the <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> asynchronously.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.kafka.common.Configurable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.kafka.common.<a href="../../../../../../../org/apache/kafka/common/Configurable.html" title="interface in org.apache.kafka.common">Configurable</a></h3>
<code><a href="../../../../../../../org/apache/kafka/common/Configurable.html#configure-java.util.Map-">configure</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.Closeable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.io.<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io">close</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addRemoteLogSegmentMetadata-org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadata-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRemoteLogSegmentMetadata</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;addRemoteLogSegmentMetadata(<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&nbsp;remoteLogSegmentMetadata)
                                             throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">This method is used to add <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> asynchronously with the containing <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentId.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentId</code></a> into <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html" title="interface in org.apache.kafka.server.log.remote.storage"><code>RemoteLogMetadataManager</code></a>.
 <p>
 RemoteLogSegmentMetadata is identified by RemoteLogSegmentId and it should have the initial state which is <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a>.
 <p>
 <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html#updateRemoteLogSegmentMetadata-org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadataUpdate-"><code>updateRemoteLogSegmentMetadata(RemoteLogSegmentMetadataUpdate)</code></a> should be used to update an existing RemoteLogSegmentMetadata.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remoteLogSegmentMetadata</code> - metadata about the remote log segment.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a CompletableFuture which will complete once this operation is finished.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given metadata instance does not have the state as <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a></dd>
</dl>
</li>
</ul>
<a name="updateRemoteLogSegmentMetadata-org.apache.kafka.server.log.remote.storage.RemoteLogSegmentMetadataUpdate-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateRemoteLogSegmentMetadata</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;updateRemoteLogSegmentMetadata(<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadataUpdate.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadataUpdate</a>&nbsp;remoteLogSegmentMetadataUpdate)
                                                throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">This method is used to update the <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> asynchronously. Currently, it allows to update with the new
 state based on the life cycle of the segment. It can go through the below state transitions.
 <p>
 <pre>
 +---------------------+            +----------------------+
 |COPY_SEGMENT_STARTED |-----------&gt;|COPY_SEGMENT_FINISHED |
 +-------------------+-+            +--+-------------------+
                     |                 |
                     |                 |
                     v                 v
                  +--+-----------------+-+
                  |DELETE_SEGMENT_STARTED|
                  +-----------+----------+
                              |
                              |
                              v
                  +-----------+-----------+
                  |DELETE_SEGMENT_FINISHED|
                  +-----------------------+
 </pre>
 <p>
 <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a> - This state indicates that the segment copying to remote storage is started but not yet finished.
 <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#COPY_SEGMENT_FINISHED"><code>RemoteLogSegmentState.COPY_SEGMENT_FINISHED</code></a> - This state indicates that the segment copying to remote storage is finished.
 <br>
 The leader broker copies the log segments to the remote storage and puts the remote log segment metadata with the
 state as “COPY_SEGMENT_STARTED” and updates the state as “COPY_SEGMENT_FINISHED” once the copy is successful.
 <p></p>
 <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#DELETE_SEGMENT_STARTED"><code>RemoteLogSegmentState.DELETE_SEGMENT_STARTED</code></a> - This state indicates that the segment deletion is started but not yet finished.
 <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#DELETE_SEGMENT_FINISHED"><code>RemoteLogSegmentState.DELETE_SEGMENT_FINISHED</code></a> - This state indicates that the segment is deleted successfully.
 <br>
 Leader partitions publish both the above delete segment events when remote log retention is reached for the
 respective segments. Remote Partition Removers also publish these events when a segment is deleted as part of
 the remote partition deletion.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remoteLogSegmentMetadataUpdate</code> - update of the remote log segment metadata.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a CompletableFuture which will complete once this operation is finished.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteResourceNotFoundException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteResourceNotFoundException</a></code> - when there are no resources associated with the given remoteLogSegmentMetadataUpdate.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given metadata instance has the state as <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentState.html#COPY_SEGMENT_STARTED"><code>RemoteLogSegmentState.COPY_SEGMENT_STARTED</code></a></dd>
</dl>
</li>
</ul>
<a name="remoteLogSegmentMetadata-org.apache.kafka.common.TopicIdPartition-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remoteLogSegmentMetadata</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;&nbsp;remoteLogSegmentMetadata(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
                                                            int&nbsp;epochForOffset,
                                                            long&nbsp;offset)
                                                     throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">Returns <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemoteLogSegmentMetadata</code></a> if it exists for the given topic partition containing the offset with
 the given leader-epoch for the offset, else returns <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true#empty--" title="class or interface in java.util"><code>Optional.empty()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>topicIdPartition</code> - topic partition</dd>
<dd><code>epochForOffset</code> - leader epoch for the given offset</dd>
<dd><code>offset</code> - offset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the requested remote log segment metadata if it exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
</dl>
</li>
</ul>
<a name="highestOffsetForEpoch-org.apache.kafka.common.TopicIdPartition-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>highestOffsetForEpoch</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util">Optional</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;highestOffsetForEpoch(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
                                     int&nbsp;leaderEpoch)
                              throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">Returns the highest log offset of topic partition for the given leader epoch in remote storage. This is used by
 remote log management subsystem to know up to which offset the segments have been copied to remote storage for
 a given leader epoch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>topicIdPartition</code> - topic partition</dd>
<dd><code>leaderEpoch</code> - leader epoch</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the requested highest log offset if exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
</dl>
</li>
</ul>
<a name="putRemotePartitionDeleteMetadata-org.apache.kafka.server.log.remote.storage.RemotePartitionDeleteMetadata-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putRemotePartitionDeleteMetadata</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;putRemotePartitionDeleteMetadata(<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemotePartitionDeleteMetadata</a>&nbsp;remotePartitionDeleteMetadata)
                                                  throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">This method is used to update the metadata about remote partition delete event asynchronously. Currently, it allows updating the
 state (<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteState.html" title="enum in org.apache.kafka.server.log.remote.storage"><code>RemotePartitionDeleteState</code></a>) of a topic partition in remote metadata storage. Controller invokes
 this method with <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><code>RemotePartitionDeleteMetadata</code></a> having state as <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteState.html#DELETE_PARTITION_MARKED"><code>RemotePartitionDeleteState.DELETE_PARTITION_MARKED</code></a>.
 So, remote partition removers can act on this event to clean the respective remote log segments of the partition.
 <p><br>
 In the case of default RLMM implementation, remote partition remover processes <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteState.html#DELETE_PARTITION_MARKED"><code>RemotePartitionDeleteState.DELETE_PARTITION_MARKED</code></a>
 <ul>
 <li> sends an event with state as <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteState.html#DELETE_PARTITION_STARTED"><code>RemotePartitionDeleteState.DELETE_PARTITION_STARTED</code></a>
 <li> gets all the remote log segments and deletes them.
 <li> sends an event with state as <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemotePartitionDeleteState.html#DELETE_PARTITION_FINISHED"><code>RemotePartitionDeleteState.DELETE_PARTITION_FINISHED</code></a> once all the remote log segments are
 deleted.
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remotePartitionDeleteMetadata</code> - update on delete state of a partition.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a CompletableFuture which will complete once this operation is finished.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code> - if there are any storage related errors occurred.</dd>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteResourceNotFoundException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteResourceNotFoundException</a></code> - when there are no resources associated with the given remotePartitionDeleteMetadata.</dd>
</dl>
</li>
</ul>
<a name="listRemoteLogSegments-org.apache.kafka.common.TopicIdPartition-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listRemoteLogSegments</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;&nbsp;listRemoteLogSegments(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition)
                                                  throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">Returns all the remote log segment metadata of the given topicIdPartition.
 <p>
 Remote Partition Removers uses this method to fetch all the segments for a given topic partition, so that they
 can delete them.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Iterator of all the remote log segment metadata for the given topic partition.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code></dd>
</dl>
</li>
</ul>
<a name="listRemoteLogSegments-org.apache.kafka.common.TopicIdPartition-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listRemoteLogSegments</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteLogSegmentMetadata</a>&gt;&nbsp;listRemoteLogSegments(<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&nbsp;topicIdPartition,
                                                         int&nbsp;leaderEpoch)
                                                  throws <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></pre>
<div class="block">Returns iterator of remote log segment metadata, sorted by <a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentMetadata.html#startOffset--"><code>RemoteLogSegmentMetadata.startOffset()</code></a> in
 ascending order which contains the given leader epoch. This is used by remote log retention management subsystem
 to fetch the segment metadata for a given leader epoch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>topicIdPartition</code> - topic partition</dd>
<dd><code>leaderEpoch</code> - leader epoch</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Iterator of remote segments, sorted by start offset in ascending order.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteStorageException.html" title="class in org.apache.kafka.server.log.remote.storage">RemoteStorageException</a></code></dd>
</dl>
</li>
</ul>
<a name="onPartitionLeadershipChanges-java.util.Set-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPartitionLeadershipChanges</h4>
<pre>void&nbsp;onPartitionLeadershipChanges(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;leaderPartitions,
                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;followerPartitions)</pre>
<div class="block">This method is invoked only when there are changes in leadership of the topic partitions that this broker is
 responsible for.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>leaderPartitions</code> - partitions that have become leaders on this broker.</dd>
<dd><code>followerPartitions</code> - partitions that have become followers on this broker.</dd>
</dl>
</li>
</ul>
<a name="onStopPartitions-java.util.Set-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onStopPartitions</h4>
<pre>void&nbsp;onStopPartitions(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../../org/apache/kafka/common/TopicIdPartition.html" title="class in org.apache.kafka.common">TopicIdPartition</a>&gt;&nbsp;partitions)</pre>
<div class="block">This method is invoked only when the topic partitions are stopped on this broker. This can happen when a
 partition is emigrated to other broker or a partition is deleted.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitions</code> - topic partitions that have been stopped.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogMetadata.html" title="class in org.apache.kafka.server.log.remote.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/kafka/server/log/remote/storage/RemoteLogSegmentId.html" title="class in org.apache.kafka.server.log.remote.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/kafka/server/log/remote/storage/RemoteLogMetadataManager.html" target="_top">Frames</a></li>
<li><a href="RemoteLogMetadataManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
